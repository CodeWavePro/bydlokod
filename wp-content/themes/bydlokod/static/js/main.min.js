!function(e){"function"==typeof define&&define.amd?define("main",e):e()}((function(){"use strict";var e=!1;if("undefined"!=typeof window){var t={get passive(){e=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),n=[],r=!1,i=-1,s=void 0,a=void 0,c=function(e){return n.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},l=function(e){var t=e||window.event;return!!c(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},d=function(t,d){if(t){if(!n.some((function(e){return e.targetElement===t}))){var u={targetElement:t,options:d||{}};n=[].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(n),[u]),o?(t.ontouchstart=function(e){1===e.targetTouches.length&&(i=e.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(e,t){var o=e.targetTouches[0].clientY-i;!c(e.target)&&(t&&0===t.scrollTop&&o>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&o<0?l(e):e.stopPropagation())}(e,t)},r||(document.addEventListener("touchmove",l,e?{passive:!1}:void 0),r=!0)):function(e){if(void 0===a){var t=!!e&&!0===e.reserveScrollBarGap,o=window.innerWidth-document.documentElement.clientWidth;t&&o>0&&(a=document.body.style.paddingRight,document.body.style.paddingRight=o+"px")}void 0===s&&(s=document.body.style.overflow,document.body.style.overflow="hidden")}(d)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},u=function(t){t?(n=n.filter((function(e){return e.targetElement!==t})),o?(t.ontouchstart=null,t.ontouchmove=null,r&&0===n.length&&(document.removeEventListener("touchmove",l,e?{passive:!1}:void 0),r=!1)):n.length||(void 0!==a&&(document.body.style.paddingRight=a,a=void 0),void 0!==s&&(document.body.style.overflow=s,s=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")};const v=window.wpData.ajaxUrl;let m,f=!1;const h=()=>m,p=e=>"boolean"==typeof e&&(f=e,!0);document.addEventListener("DOMContentLoaded",()=>{((e,t="")=>{if(!e)return;const o=t?"img"+t:"img",n=e.querySelectorAll(o),r=[];if(!n.length)return;if(n.forEach(e=>{".svg"===e.src.slice(-4)&&r.push(e)}),!r.length)return;const i=new DOMParser;r.forEach(e=>{fetch(e.src).then(e=>e.text()).then(t=>{const o=i.parseFromString(t,"text/html").querySelector("svg");o&&e.replaceWith(o)})})})(document),g(),y()});const g=()=>{const e=document.querySelectorAll(".label-focus input");e.length&&e.forEach(e=>{const t=e.parentElement;t&&(e.addEventListener("focus",()=>{t.classList.add("focus")}),e.addEventListener("blur",()=>{t.classList.remove("focus")}))})},y=()=>{const e=document.querySelectorAll(".popup-close");e.length&&e.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".popup");t&&(t.classList.add("hidden"),u(h()))})})};document.addEventListener("DOMContentLoaded",()=>{}),document.addEventListener("DOMContentLoaded",()=>{w()});const w=()=>{const e=document.querySelectorAll(".open-searchform"),t=document.querySelector("#searchform-popup");var o;e.length&&t&&(o="#searchform-popup",m=document.querySelector(o),e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),t.classList.remove("hidden"),d(h(),{reserveScrollBarGap:!0})})}))};document.addEventListener("DOMContentLoaded",()=>{L()});const L=()=>{const e=document.querySelectorAll(".post-stats-item.reactions");e.length&&e.forEach(e=>{const t=e.dataset.post;let o=e.querySelector("span"),n=e.querySelector("i");t&&e.addEventListener("click",()=>{if(f)return;p(!0);const r=new FormData;r.append("action","bydlo_ajax_set_post_likes"),r.append("post_id",t),(async e=>{let t=await fetch(v,{method:"post",credentials:"same-origin",body:e});return await t.json()})(r).then(t=>{if(t)switch(t.success){case!0:console.log(t.data.msg),t.data.like?(n.classList.add("like-animation"),e.setAttribute("title","Вам понравилось"),setTimeout(()=>{n.classList.remove("like-animation"),e.classList.add("you-liked"),o.innerHTML=t.data.count},750)):(n.classList.add("dislike-animation"),e.setAttribute("title","Оценить"),setTimeout(()=>{n.classList.remove("dislike-animation"),e.classList.remove("you-liked"),o.innerHTML=t.data.count},750));break;case!1:console.error(t.data.msg)}p(!1)})})})}}));