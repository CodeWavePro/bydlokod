{"version":3,"sources":["node_modules/body-scroll-lock/lib/bodyScrollLock.esm.js","src/js/common/global.js","src/js/common/common.js","src/js/common/header.js","src/js/common/search.js","src/js/common/forms.js","src/js/auth/ajax.js","src/js/post/ajax.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","hasPassiveEvents","window","passiveTestOptions","passive","undefined","addEventListener","removeEventListener","isIosDevice","navigator","platform","test","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","allowTouchMove","el","some","lock","options","preventDefault","rawEvent","e","event","target","touches","setOverflowHidden","_reserveScrollBarGap","reserveScrollBarGap","scrollBarGap","innerWidth","document","documentElement","clientWidth","body","style","paddingRight","overflow","restoreOverflowSetting","isTargetElementTotallyScrolled","targetElement","scrollHeight","scrollTop","clientHeight","handleScroll","clientY","targetTouches","stopPropagation","disableBodyScroll","console","error","concat","ontouchstart","ontouchmove","enableBodyScroll","filter","ajaxUrl","wpData","ajaxStatus","renderSVGs","wrapper","imgSelector","selector","images","querySelectorAll","svgs","forEach","img","src","extension","slice","push","parser","DOMParser","svg","fetch","then","response","text","parsed","parseFromString","svgTag","querySelector","replaceWith","setTargetElement","elementId","getTargetElement","getAjaxStatus","setAjaxStatus","state","bydloAjaxRequest","formData","method","credentials","data","json","createLoader","extraClass","loader","createElement","classList","add","innerHTML","split","processFormErrors","errors","form","fieldId","field","closest","focusLabels","popupClose","popupCloseOnClick","inputs","input","label","parentElement","remove","popupCloseButtons","button","popup","popups","contains","openSearchForm","buttons","clearFormMessage","msgElement","setFormMessage","msgContent","isSuccess","clearFormErrorClasses","togglePasswordVisibilityInInput","togglePassButtons","iconWrapper","type","openAuthPopup","logout","authLinks","authPopup","popupInner","link","ajaxData","FormData","append","appendChild","success","login","register","openAnotherFormInsidePopup","msg","redirect","location","href","JSON","parse","log","setTimeout","activate","loadMorePosts","clickPostLike","posts","postsWrapper","perPage","parseInt","dataset","totalCount","allPostsCount","offset","likesBlocks","likesBlock","postId","post","likesCount","icon","like","setAttribute","count"],"mappings":"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","file":"main.min.js","sourcesContent":["function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n// Older browsers don't support event options, feature detect it.\n\n// Adopted and modified solution from Bohdan Didukh (2017)\n// https://stackoverflow.com/questions/41594997/ios-10-safari-prevent-scrolling-behind-a-fixed-overlay-and-maintain-scroll-posi\n\nvar hasPassiveEvents = false;\nif (typeof window !== 'undefined') {\n  var passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true;\n      return undefined;\n    }\n  };\n  window.addEventListener('testPassive', null, passiveTestOptions);\n  window.removeEventListener('testPassive', null, passiveTestOptions);\n}\n\nvar isIosDevice = typeof window !== 'undefined' && window.navigator && window.navigator.platform && (/iP(ad|hone|od)/.test(window.navigator.platform) || window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1);\n\n\nvar locks = [];\nvar documentListenerAdded = false;\nvar initialClientY = -1;\nvar previousBodyOverflowSetting = void 0;\nvar previousBodyPaddingRight = void 0;\n\n// returns true if `el` should be allowed to receive touchmove events.\nvar allowTouchMove = function allowTouchMove(el) {\n  return locks.some(function (lock) {\n    if (lock.options.allowTouchMove && lock.options.allowTouchMove(el)) {\n      return true;\n    }\n\n    return false;\n  });\n};\n\nvar preventDefault = function preventDefault(rawEvent) {\n  var e = rawEvent || window.event;\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true;\n  }\n\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true;\n\n  if (e.preventDefault) e.preventDefault();\n\n  return false;\n};\n\nvar setOverflowHidden = function setOverflowHidden(options) {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    var _reserveScrollBarGap = !!options && options.reserveScrollBarGap === true;\n    var scrollBarGap = window.innerWidth - document.documentElement.clientWidth;\n\n    if (_reserveScrollBarGap && scrollBarGap > 0) {\n      previousBodyPaddingRight = document.body.style.paddingRight;\n      document.body.style.paddingRight = scrollBarGap + 'px';\n    }\n  }\n\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow;\n    document.body.style.overflow = 'hidden';\n  }\n};\n\nvar restoreOverflowSetting = function restoreOverflowSetting() {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight;\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined;\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting;\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined;\n  }\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nvar isTargetElementTotallyScrolled = function isTargetElementTotallyScrolled(targetElement) {\n  return targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false;\n};\n\nvar handleScroll = function handleScroll(event, targetElement) {\n  var clientY = event.targetTouches[0].clientY - initialClientY;\n\n  if (allowTouchMove(event.target)) {\n    return false;\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event);\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event);\n  }\n\n  event.stopPropagation();\n  return true;\n};\n\nexport var disableBodyScroll = function disableBodyScroll(targetElement, options) {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.');\n    return;\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(function (lock) {\n    return lock.targetElement === targetElement;\n  })) {\n    return;\n  }\n\n  var lock = {\n    targetElement: targetElement,\n    options: options || {}\n  };\n\n  locks = [].concat(_toConsumableArray(locks), [lock]);\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY;\n      }\n    };\n    targetElement.ontouchmove = function (event) {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement);\n      }\n    };\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = true;\n    }\n  } else {\n    setOverflowHidden(options);\n  }\n};\n\nexport var clearAllBodyScrollLocks = function clearAllBodyScrollLocks() {\n  if (isIosDevice) {\n    // Clear all locks ontouchstart/ontouchmove handlers, and the references.\n    locks.forEach(function (lock) {\n      lock.targetElement.ontouchstart = null;\n      lock.targetElement.ontouchmove = null;\n    });\n\n    if (documentListenerAdded) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n\n    // Reset initial clientY.\n    initialClientY = -1;\n  } else {\n    restoreOverflowSetting();\n  }\n\n  locks = [];\n};\n\nexport var enableBodyScroll = function enableBodyScroll(targetElement) {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error('enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.');\n    return;\n  }\n\n  locks = locks.filter(function (lock) {\n    return lock.targetElement !== targetElement;\n  });\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null;\n    targetElement.ontouchmove = null;\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined);\n      documentListenerAdded = false;\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting();\n  }\n};\n\n","export const TRANSITION_DURATION = 350,\r\n\tajaxUrl = window.wpData.ajaxUrl\r\n\r\nlet ajaxStatus = false,\r\n\ttargetElement\r\n\r\n/**\r\n * Render SVG code from images (<img /> tags).\r\n *\r\n * @param {DOMElement}\twrapper\t\tDOM element, inside which need to render svgs.\r\n * @param {String}\t\timgSelector\tSpecific selector for <img /> tag to render SVG.\r\n */\r\nexport const renderSVGs = ( wrapper, imgSelector = '' ) => {\r\n\tif( ! wrapper ) return\r\n\r\n\t// Get images with specific selector only OR all images.\r\n\tconst selector\t= imgSelector ? `img${imgSelector}` : 'img',\r\n\t\timages\t\t= wrapper.querySelectorAll( selector ),\r\n\t\tsvgs\t\t= []\r\n\r\n\t// If there are no images - exit.\r\n\tif( ! images.length ) return\r\n\r\n\t// Get only svg images to svgs array.\r\n\timages.forEach( img => {\r\n\t\tlet src\t\t\t= img.src,\r\n\t\t\textension\t= src.slice( -4 )\r\n\r\n\t\tif( extension === '.svg' ) svgs.push( img )\r\n\t} )\r\n\r\n\t// If there are no svgs - exit.\r\n\tif( ! svgs.length ) return\r\n\r\n\tconst parser = new DOMParser()\r\n\r\n\tsvgs.forEach( svg => {\r\n\t\t// Fetch the file from the server.\r\n\t\tfetch( svg.src )\r\n\t\t\t.then( response => response.text() )\r\n\t\t\t.then( text => {\r\n\t\t\t\t// Turn the raw text into a document with the svg element in it.\r\n\t\t\t\tconst parsed = parser.parseFromString( text, 'text/html' )\r\n\t\t\t\t// Select the <svg> element from that document.\r\n\t\t\t\tconst svgTag = parsed.querySelector( 'svg' )\r\n\r\n\t\t\t\t// If the svg is found, replace the image with the svg.\r\n\t\t\t\tif( svgTag ) svg.replaceWith( svgTag )\r\n\t\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Set variable for disableScrollLock.\r\n *\r\n * @param\t{String}\telementId\tSpecific element ID.\r\n * @returns\t{Boolean}\t\t\t\tTrue if element is set, false if not.\r\n */\r\nexport const setTargetElement = elementId => {\r\n\ttargetElement = document.querySelector( elementId )\r\n\r\n\tif( ! targetElement ) return false\r\n\r\n\treturn true\r\n}\r\n\r\n/**\r\n * Get element for disableScrollLock.\r\n *\r\n * @returns targetElement value.\r\n */\r\nexport const getTargetElement = () => {\r\n\treturn targetElement\r\n}\r\n\r\n/**\r\n * Get AJAX working status: is in work now or not.\r\n *\r\n * @returns\t{Boolean} AJAX working status.\r\n */\r\nexport const getAjaxStatus = () => ajaxStatus\r\n\r\n/**\r\n * Set AJAX working status: is in work now or not.\r\n *\r\n * @param\t{Boolean}\tstate\tWorking status - true or false.\r\n * @returns\t{Boolean}\t\t\tTrue on success, false on failure.\r\n */\r\nexport const setAjaxStatus = state => {\r\n\tif( typeof state === 'boolean' ) ajaxStatus = state\r\n\telse return false\r\n\r\n\treturn true\r\n}\r\n\r\n/**\r\n * Custom AJAX request.\r\n *\r\n * @param\t{Object}\tformData\tData for fetch body.\r\n * @returns\t{Array}\t\t\t\t\tReponse data array.\r\n */\r\nexport const bydloAjaxRequest = async formData => {\r\n\tlet response = await fetch( ajaxUrl, {\r\n\t\tmethod\t\t: 'post',\r\n\t\tcredentials\t: 'same-origin',\r\n\t\tbody\t\t: formData\r\n\t} )\r\n\tlet data = await response.json()\r\n\r\n\treturn data\r\n}\r\n\r\n/**\r\n * Create loader HTML Object.\r\n *\r\n * @param\t{String}\t\textraClass\tClass for loader.\r\n * @returns {HTMLObject}\tloader\t\tHTML Object to insert in some block/element.\r\n */\r\nexport const createLoader = ( extraClass = '' ) => {\r\n\tconst loader = document.createElement( 'span' )\r\n\r\n\tloader.classList.add( 'loader' )\r\n\tloader.innerHTML = '<i class=\"fa-solid fa-circle-notch\"></i>'\r\n\r\n\tif( extraClass ) loader.classList.add( ...extraClass.split( ' ' ) )\r\n\r\n\treturn loader\r\n}\r\n\r\n/**\r\n * Highlight invalid form fields.\r\n *\r\n * @param {Array}\t\terrors\tArray of invalid fields (IDs).\r\n * @param {HTMLObject}\tform\tIn which forms these fields are placed.\r\n */\r\nexport const processFormErrors = ( errors, form ) => {\r\n\tif( ! errors.length || ! form ) return\r\n\r\n\terrors.forEach( fieldId => {\r\n\t\tconst field = form.querySelector( `#${fieldId}` )\r\n\r\n\t\tif( ! field ) return\r\n\r\n\t\tfield.closest( 'label' ).classList.add( 'error' )\r\n\t} )\r\n}","import { enableBodyScroll } from 'body-scroll-lock'\r\nimport { renderSVGs, getTargetElement } from './global'\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t'use strict'\r\n\r\n\trenderSVGs( document )\r\n\tfocusLabels()\r\n\tpopupClose()\r\n\tpopupCloseOnClick()\r\n} )\r\n\r\n/**\r\n * Focus inputs inside specific labels.\r\n */\r\nexport const focusLabels = () => {\r\n\tconst inputs = document.querySelectorAll( '.label-focus input' )\r\n\r\n\tif( ! inputs.length ) return\r\n\r\n\tinputs.forEach( input => {\r\n\t\tconst label = input.parentElement\r\n\r\n\t\tinput.addEventListener( 'focus', () => label.classList.add( 'focus' ) )\r\n\t\tinput.addEventListener( 'blur', () => label.classList.remove( 'focus' ) )\r\n\t} );\r\n}\r\n\r\n/**\r\n * Close popup by clicking on close button.\r\n */\r\nconst popupClose = () => {\r\n\tconst popupCloseButtons = document.querySelectorAll( '.popup-close' )\r\n\r\n\tif( ! popupCloseButtons.length ) return\r\n\r\n\tpopupCloseButtons.forEach( button => {\r\n\t\tbutton.addEventListener( 'click', () => {\r\n\t\t\tconst popup = button.closest( '.popup' )\r\n\r\n\t\t\tif( ! popup ) return\r\n\r\n\t\t\tpopup.classList.add( 'hidden' )\r\n\t\t\tenableBodyScroll( getTargetElement() )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Close popup if its area clicked.\r\n */\r\nconst popupCloseOnClick = () => {\r\n\tconst popups = document.querySelectorAll( '.popup' )\r\n\r\n\tif( ! popups.length ) return\r\n\r\n\tpopups.forEach( popup => {\r\n\t\tpopup.addEventListener( 'click', e => {\r\n\t\t\te.stopPropagation()\r\n\r\n\t\t\t// If popup area clicked.\r\n\t\t\tif( e.target.classList.contains( 'popup' ) ){\r\n\t\t\t\tenableBodyScroll( getTargetElement() )\r\n\t\t\t\tpopup.classList.add( 'hidden' )\r\n\t\t\t}\r\n\t\t} )\r\n\t} )\r\n}","import { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock'\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t'use strict'\r\n\r\n\t/**\r\n\t * @example of bodyScrollLock usage:\r\n\t *\r\n\t\tlet targetElement = document.querySelector( '#some-id' )\t// Use ID of the element that will have normal scrolling behaviour.\r\n\t\tdisableBodyScroll( targetElement, { reserveScrollBarGap: true } )\t// Disable main scroll.\r\n\t\tenableBodyScroll( targetElement )\t// Enable main scroll.\r\n\t*/\r\n} )","import { disableBodyScroll } from 'body-scroll-lock'\r\nimport { setTargetElement, getTargetElement } from './global'\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t'use strict'\r\n\r\n\topenSearchForm()\r\n} )\r\n\r\n/**\r\n * Open search form popup.\r\n */\r\nconst openSearchForm = () => {\r\n\tconst buttons\t= document.querySelectorAll( '.open-searchform' ),\r\n\t\tpopup\t\t= document.querySelector( '#searchform-popup' )\r\n\r\n\tif( ! buttons.length || ! popup ) return\r\n\r\n\tsetTargetElement( '#searchform-popup' )\r\n\r\n\tbuttons.forEach( button => {\r\n\t\tbutton.addEventListener( 'click', e => {\r\n\t\t\te.preventDefault()\r\n\r\n\t\t\tpopup.classList.remove( 'hidden' )\r\n\t\t\tdisableBodyScroll( getTargetElement(), { reserveScrollBarGap: true } )\r\n\t\t} )\r\n\t} )\r\n}","/**\r\n * Clear some form's message element.\r\n *\r\n * @param {HTMLObject} msgElement\tForm message element.\r\n */\r\nexport const clearFormMessage = msgElement => {\r\n\tif( ! msgElement ) return\r\n\r\n\tmsgElement.classList.remove( 'success' )\r\n\tmsgElement.innerHTML = ''\r\n}\r\n\r\n/**\r\n * Add success class to form's message element\r\n * and put success message content inside.\r\n *\r\n * @param {HTMLObject}\tmsgElement\tForm message element.\r\n * @param {String}\t\tmsgContent\tMessage inner content.\r\n * @param {Boolean}\t\tisSuccess\tIs this success message or not.\r\n */\r\nexport const setFormMessage = ( msgElement, msgContent, isSuccess = false ) => {\r\n\tif( ! msgElement || ! msgContent ) return\r\n\r\n\tif( isSuccess ) msgElement.classList.add( 'success' )\r\n\r\n\tmsgElement.innerHTML = msgContent\r\n}\r\n\r\n/**\r\n * Remove error class from form's labels with it.\r\n *\r\n * @param {HTMLObject} form\tSpecific form.\r\n */\r\nexport const clearFormErrorClasses = form => {\r\n\tif( ! form ) return\r\n\r\n\tform.querySelectorAll( 'label.error' ).forEach( label => label.classList.remove( 'error' ) )\r\n}\r\n\r\nexport const togglePasswordVisibilityInInput = () => {\r\n\tconst togglePassButtons = document.querySelectorAll( '.toggle-pass' )\r\n\r\n\tif( ! togglePassButtons.length ) return\r\n\r\n\ttogglePassButtons.forEach( iconWrapper => {\r\n\t\ticonWrapper.addEventListener( 'click', () => {\r\n\t\t\tconst label\t\t= iconWrapper.closest( 'label' ),\r\n\t\t\t\tinput\t\t= label.querySelector( 'input' )\r\n\r\n\r\n\t\t\t// If password is hidden - show it.\r\n\t\t\ticonWrapper.querySelector( '.hidden' ).classList.remove( 'hidden' )\r\n\r\n\t\t\tif( input.type === 'password' ){\r\n\t\t\t\tinput.type = 'text'\r\n\t\t\t\ticonWrapper.querySelector( '.show-pass' ).classList.add( 'hidden' )\r\n\t\t\t}\telse {\r\n\t\t\t\tinput.type = 'password'\r\n\t\t\t\ticonWrapper.querySelector( '.hide-pass' ).classList.add( 'hidden' )\r\n\t\t\t}\r\n\t\t} )\r\n\t} )\r\n}","import { disableBodyScroll } from 'body-scroll-lock'\r\nimport {\r\n\tgetAjaxStatus,\r\n\tsetAjaxStatus,\r\n\tbydloAjaxRequest,\r\n\tcreateLoader,\r\n\tsetTargetElement,\r\n\tgetTargetElement,\r\n\tprocessFormErrors\r\n} from '../common/global'\r\nimport { focusLabels } from '../common/common'\r\nimport {\r\n\tclearFormMessage,\r\n\tclearFormErrorClasses,\r\n\tsetFormMessage,\r\n\ttogglePasswordVisibilityInInput\r\n} from '../common/forms'\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t'use strict'\r\n\r\n\topenAuthPopup()\r\n\r\n\t// Logout - only for logged in Users.\r\n\tif( document.body.classList.contains( 'logged-in' ) ) logout()\r\n} )\r\n\r\n/**\r\n * Open authorization popup with Login or Register form.\r\n */\r\nconst openAuthPopup = () => {\r\n\tconst authLinks = document.querySelectorAll( '.header-auth-link' ),\r\n\t\tauthPopup\t= document.querySelector( '.popup-auth' )\r\n\r\n\tif( ! authLinks.length || ! authPopup ) return\r\n\r\n\tconst popupInner = authPopup.querySelector( '.popup-inner' )\r\n\r\n\tauthLinks.forEach( link => {\r\n\t\tlink.addEventListener( 'click', e => {\r\n\t\t\te.preventDefault()\r\n\r\n\t\t\tif( getAjaxStatus() ) return\r\n\r\n\t\t\tsetAjaxStatus( true )\r\n\r\n\t\t\tconst ajaxData\t= new FormData(),\r\n\t\t\t\tloader\t\t= createLoader( 'centered lg violet' )\r\n\t\t\tlet type\t\t= link.classList.contains( 'login' ) ? 'login' : 'register'\r\n\r\n\t\t\tajaxData.append( 'action', 'bydlo_ajax_show_auth_form' )\r\n\t\t\tajaxData.append( 'type', type )\r\n\r\n\t\t\t// Show popup with loader.\r\n\t\t\tsetTargetElement( '#popup-auth' )\r\n\t\t\tdisableBodyScroll( getTargetElement(), { reserveScrollBarGap: true } )\r\n\t\t\tpopupInner.innerHTML = ''\r\n\t\t\tpopupInner.appendChild( loader )\r\n\t\t\tauthPopup.classList.remove( 'hidden' )\r\n\r\n\t\t\tbydloAjaxRequest( ajaxData ).then( response => {\r\n\t\t\t\tif( response ){\r\n\t\t\t\t\tloader.remove()\r\n\r\n\t\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\t\tcase true:\r\n\t\t\t\t\t\t\tpopupInner.innerHTML = response.data.form\r\n\t\t\t\t\t\t\tfocusLabels()\r\n\r\n\t\t\t\t\t\t\tif( type === 'login' ) login()\r\n\t\t\t\t\t\t\telse register()\r\n\r\n\t\t\t\t\t\t\ttogglePasswordVisibilityInInput()\r\n\t\t\t\t\t\t\topenAnotherFormInsidePopup()\r\n\t\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\t\tcase false:\r\n\t\t\t\t\t\t\tpopupInner.innerHTML = response.data.msg\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetAjaxStatus( false )\r\n\t\t\t} )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Open another form inside authorization popup on links click.\r\n */\r\nexport const openAnotherFormInsidePopup = () => {\r\n\tconst authLinks = document.querySelectorAll( '.form-link' ),\r\n\t\tauthPopup\t= document.querySelector( '.popup-auth' )\r\n\r\n\tif( ! authLinks.length || ! authPopup ) return\r\n\r\n\tconst popupInner = authPopup.querySelector( '.popup-inner' )\r\n\r\n\tauthLinks.forEach( link => {\r\n\t\tlink.addEventListener( 'click', e => {\r\n\t\t\te.preventDefault()\r\n\r\n\t\t\tif( getAjaxStatus() ) return\r\n\r\n\t\t\tsetAjaxStatus( true )\r\n\r\n\t\t\tconst ajaxData\t= new FormData(),\r\n\t\t\t\tloader\t\t= createLoader( 'centered lg violet' )\r\n\t\t\tlet type\t\t= link.classList.contains( 'login' ) ? 'login' : 'register'\r\n\r\n\t\t\tajaxData.append( 'action', 'bydlo_ajax_show_auth_form' )\r\n\t\t\tajaxData.append( 'type', type )\r\n\r\n\t\t\t// Show popup with loader.\r\n\t\t\tsetTargetElement( '#popup-auth' )\r\n\t\t\tdisableBodyScroll( getTargetElement(), { reserveScrollBarGap: true } )\r\n\t\t\tpopupInner.innerHTML = ''\r\n\t\t\tpopupInner.appendChild( loader )\r\n\r\n\t\t\tbydloAjaxRequest( ajaxData ).then( response => {\r\n\t\t\t\tif( response ){\r\n\t\t\t\t\tloader.remove()\r\n\r\n\t\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\t\tcase true:\r\n\t\t\t\t\t\t\tpopupInner.innerHTML = response.data.form\r\n\t\t\t\t\t\t\tfocusLabels()\r\n\r\n\t\t\t\t\t\t\tif( type === 'login' ) login()\r\n\t\t\t\t\t\t\telse register()\r\n\r\n\t\t\t\t\t\t\ttogglePasswordVisibilityInInput()\r\n\t\t\t\t\t\t\topenAnotherFormInsidePopup()\r\n\t\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\t\tcase false:\r\n\t\t\t\t\t\t\tpopupInner.innerHTML = response.data.msg\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetAjaxStatus( false )\r\n\t\t\t} )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Login.\r\n */\r\nexport const login = () => {\r\n\tconst form = document.querySelector( '.form-login' )\r\n\r\n\tif( ! form ) return\r\n\r\n\tform.addEventListener( 'submit', e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif( getAjaxStatus() ) return\r\n\r\n\t\tsetAjaxStatus( true )\r\n\r\n\t\tconst formData\t= new FormData( form ),\r\n\t\t\tbutton\t\t= form.querySelector( '.button[type=\"submit\"]' ),\r\n\t\t\tmsg\t\t\t= form.querySelector( '.form-message' ),\r\n\t\t\tloader\t\t= createLoader()\r\n\r\n\t\tformData.append( 'action', 'bydlo_ajax_login' )\r\n\t\tformData.append( 'form_data', formData )\r\n\t\tbutton.appendChild( loader )\r\n\t\tclearFormMessage( msg )\r\n\t\tclearFormErrorClasses( form )\r\n\r\n\t\tbydloAjaxRequest( formData ).then( response => {\r\n\t\t\tif( response ){\r\n\t\t\t\tloader.remove()\r\n\r\n\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\tcase true:\r\n\t\t\t\t\t\tsetFormMessage( msg, response.data.msg, true )\r\n\r\n\t\t\t\t\t\tif( response.data.redirect ) location.href = response.data.redirect\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase false:\r\n\t\t\t\t\t\tconsole.error( response.data.msg )\r\n\t\t\t\t\t\tsetFormMessage( msg, response.data.msg )\r\n\r\n\t\t\t\t\t\t// If has errors.\r\n\t\t\t\t\t\tif( response.data.errors && response.data.errors.length )\r\n\t\t\t\t\t\t\tprocessFormErrors( JSON.parse( response.data.errors ), form )\r\n\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetAjaxStatus( false )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Logout.\r\n */\r\nconst logout = () => {\r\n\tconst link = document.querySelector( '.header-logout-link' )\r\n\r\n\tif( ! link ) return\r\n\r\n\tlink.addEventListener( 'click', e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif( getAjaxStatus() ) return\r\n\r\n\t\tsetAjaxStatus( true )\r\n\r\n\t\tconst formData\t= new FormData(),\r\n\t\t\tloader\t\t= createLoader()\r\n\r\n\t\tformData.append( 'action', 'bydlo_ajax_logout' )\r\n\t\tlink.appendChild( loader )\r\n\r\n\t\tbydloAjaxRequest( formData ).then( response => {\r\n\t\t\tif( response ){\r\n\t\t\t\tloader.remove()\r\n\r\n\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\tcase true:\r\n\t\t\t\t\t\tconsole.log( response.data.msg )\r\n\r\n\t\t\t\t\t\tif( response.data.redirect ) location.href = response.data.redirect\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase false:\r\n\t\t\t\t\t\tconsole.error( response.data.msg )\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetAjaxStatus( false )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Registration.\r\n */\r\nexport const register = () => {\r\n\tconst form\t\t= document.querySelector( '.form-register' ),\r\n\t\tauthPopup\t= document.querySelector( '.popup-auth' ),\r\n\t\tpopupInner\t= authPopup.querySelector( '.popup-inner' )\r\n\r\n\tif( ! form ) return\r\n\r\n\tform.addEventListener( 'submit', e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif( getAjaxStatus() ) return\r\n\r\n\t\tsetAjaxStatus( true )\r\n\r\n\t\tconst formData\t= new FormData( form ),\r\n\t\t\tbutton\t\t= form.querySelector( '.button[type=\"submit\"]' ),\r\n\t\t\tmsg\t\t\t= form.querySelector( '.form-message' ),\r\n\t\t\tloader\t\t= createLoader()\r\n\r\n\t\tformData.append( 'action', 'bydlo_ajax_register' )\r\n\t\tformData.append( 'form_data', formData )\r\n\t\tbutton.appendChild( loader )\r\n\t\tclearFormMessage( msg )\r\n\t\tclearFormErrorClasses( form )\r\n\r\n\t\tbydloAjaxRequest( formData ).then( response => {\r\n\t\t\tif( response ){\r\n\t\t\t\tloader.remove()\r\n\r\n\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\tcase true:\r\n\t\t\t\t\t\tsetFormMessage( msg, response.data.msg, true )\r\n\t\t\t\t\t\tsetTimeout( () => {\r\n\t\t\t\t\t\t\tpopupInner.innerHTML = response.data.form\r\n\t\t\t\t\t\t\tfocusLabels()\r\n\t\t\t\t\t\t\tactivate()\r\n\t\t\t\t\t\t}, 1000 );\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase false:\r\n\t\t\t\t\t\tconsole.error( response.data.msg )\r\n\t\t\t\t\t\tsetFormMessage( msg, response.data.msg )\r\n\r\n\t\t\t\t\t\t// If has errors.\r\n\t\t\t\t\t\tif( response.data.errors && response.data.errors.length )\r\n\t\t\t\t\t\t\tprocessFormErrors( JSON.parse( response.data.errors ), form )\r\n\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetAjaxStatus( false )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Activation.\r\n */\r\nexport const activate = () => {\r\n\tconst form\t\t= document.querySelector( '.form-activate' ),\r\n\t\tauthPopup\t= document.querySelector( '.popup-auth' ),\r\n\t\tpopupInner\t= authPopup.querySelector( '.popup-inner' )\r\n\r\n\tif( ! form ) return\r\n\r\n\tform.addEventListener( 'submit', e => {\r\n\t\te.preventDefault()\r\n\r\n\t\tif( getAjaxStatus() ) return\r\n\r\n\t\tsetAjaxStatus( true )\r\n\r\n\t\tconst formData\t= new FormData( form ),\r\n\t\t\tbutton\t\t= form.querySelector( '.button[type=\"submit\"]' ),\r\n\t\t\tmsg\t\t\t= form.querySelector( '.form-message' ),\r\n\t\t\tloader\t\t= createLoader()\r\n\r\n\t\tformData.append( 'action', 'bydlo_ajax_activate' )\r\n\t\tformData.append( 'form_data', formData )\r\n\t\tbutton.appendChild( loader )\r\n\t\tclearFormMessage( msg )\r\n\t\tclearFormErrorClasses( form )\r\n\r\n\t\tbydloAjaxRequest( formData ).then( response => {\r\n\t\t\tif( response ){\r\n\t\t\t\tloader.remove()\r\n\r\n\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\tcase true:\r\n\t\t\t\t\t\tsetFormMessage( msg, response.data.msg, true )\r\n\r\n\t\t\t\t\t\tif( response.data.redirect ) location.href = response.data.redirect\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase false:\r\n\t\t\t\t\t\tconsole.error( response.data.msg )\r\n\t\t\t\t\t\tsetFormMessage( msg, response.data.msg )\r\n\r\n\t\t\t\t\t\t// If has errors.\r\n\t\t\t\t\t\tif( response.data.errors && response.data.errors.length )\r\n\t\t\t\t\t\t\tprocessFormErrors( JSON.parse( response.data.errors ), form )\r\n\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetAjaxStatus( false )\r\n\t\t} )\r\n\t} )\r\n}","import { disableBodyScroll } from 'body-scroll-lock'\r\nimport {\r\n\tgetAjaxStatus,\r\n\tsetAjaxStatus,\r\n\tbydloAjaxRequest,\r\n\tcreateLoader,\r\n\tsetTargetElement,\r\n\tgetTargetElement\r\n} from '../common/global'\r\nimport { focusLabels } from '../common/common'\r\nimport { login, openAnotherFormInsidePopup } from '../auth/ajax'\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\t'use strict'\r\n\r\n\tloadMorePosts()\r\n\tclickPostLike()\r\n} )\r\n\r\n/**\r\n * Load more posts on button click.\r\n */\r\nconst loadMorePosts = () => {\r\n\tconst posts\t\t\t= document.querySelectorAll( '.post-preview' ),\r\n\t\tpostsWrapper\t= document.querySelector( '.main-posts' ),\r\n\t\tbutton\t\t\t= document.querySelector( '.posts-loadmore .button' )\r\n\r\n\tif( ! posts.length || ! button || ! postsWrapper ) return\r\n\r\n\tbutton.addEventListener( 'click', () => {\r\n\t\tif( getAjaxStatus() ) return\r\n\r\n\t\tsetAjaxStatus( true )\r\n\r\n\t\tconst ajaxData\t= new FormData(),\r\n\t\t\tloader\t\t= createLoader(),\r\n\t\t\tperPage\t\t= parseInt( button.dataset.perPage ),\r\n\t\t\ttotalCount\t= parseInt( button.dataset.allPostsCount )\r\n\t\tlet offset\t\t= parseInt( button.dataset.offset )\r\n\r\n\t\tajaxData.append( 'action', 'bydlo_ajax_load_more_posts' )\r\n\t\tajaxData.append( 'per_page', perPage )\r\n\t\tajaxData.append( 'offset', offset )\r\n\t\tbutton.appendChild( loader )\r\n\r\n\t\tbydloAjaxRequest( ajaxData ).then( response => {\r\n\t\t\tif( response ){\r\n\t\t\t\tloader.remove()\r\n\r\n\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\tcase true:\r\n\t\t\t\t\t\tconsole.log( response.data.msg )\r\n\t\t\t\t\t\tpostsWrapper.innerHTML += response.data.posts\r\n\t\t\t\t\t\tclickPostLike()\r\n\r\n\t\t\t\t\t\t// If there are no more posts - remove button.\r\n\t\t\t\t\t\tif( totalCount <= offset + perPage )\r\n\t\t\t\t\t\t\tbutton.remove()\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tbutton.dataset.offset = offset + perPage\r\n\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase false:\r\n\t\t\t\t\t\tconsole.error( response.data.msg )\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tsetAjaxStatus( false )\r\n\t\t} )\r\n\t} )\r\n}\r\n\r\n/**\r\n * Click on post's likes block.\r\n */\r\nconst clickPostLike = () => {\r\n\tconst likesBlocks = document.querySelectorAll( '.post-stats-item.reactions' )\r\n\r\n\tif( ! likesBlocks.length ) return\r\n\r\n\tlikesBlocks.forEach( likesBlock => {\r\n\t\tconst postId\t= likesBlock.dataset.post\r\n\t\tlet likesCount\t= likesBlock.querySelector( 'span' ),\r\n\t\t\ticon\t\t= likesBlock.querySelector( 'i' )\r\n\r\n\t\tif( ! postId ) return\r\n\r\n\t\tlikesBlock.addEventListener( 'click', () => {\r\n\t\t\tif( getAjaxStatus() ) return\r\n\r\n\t\t\tsetAjaxStatus( true )\r\n\r\n\t\t\tconst ajaxData\t= new FormData(),\r\n\t\t\t\tloader\t\t= createLoader()\r\n\r\n\t\t\tajaxData.append( 'action', 'bydlo_ajax_set_post_likes' )\r\n\t\t\tajaxData.append( 'post_id', postId )\r\n\t\t\tlikesBlock.appendChild( loader )\r\n\r\n\t\t\tbydloAjaxRequest( ajaxData ).then( response => {\r\n\t\t\t\tif( response ){\r\n\t\t\t\t\tloader.remove()\r\n\r\n\t\t\t\t\tswitch( response.success ){\r\n\t\t\t\t\t\tcase true:\r\n\t\t\t\t\t\t\tconsole.log( response.data.msg )\r\n\r\n\t\t\t\t\t\t\t// If it was like.\r\n\t\t\t\t\t\t\tif( response.data.like ){\r\n\t\t\t\t\t\t\t\ticon.classList.add( 'like-animation' )\r\n\t\t\t\t\t\t\t\tlikesBlock.setAttribute( 'title', ' ' )\r\n\t\t\t\t\t\t\t\tsetTimeout( () => {\r\n\t\t\t\t\t\t\t\t\ticon.classList.remove( 'like-animation' )\r\n\t\t\t\t\t\t\t\t\tlikesBlock.classList.add( 'you-liked' )\r\n\t\t\t\t\t\t\t\t\tlikesCount.innerHTML = response.data.count\r\n\t\t\t\t\t\t\t\t}, 750 )\r\n\t\t\t\t\t\t\t}\telse {\t// If it was dislike.\r\n\t\t\t\t\t\t\t\ticon.classList.add( 'dislike-animation' )\r\n\t\t\t\t\t\t\t\tlikesBlock.setAttribute( 'title', '' )\r\n\t\t\t\t\t\t\t\tsetTimeout( () => {\r\n\t\t\t\t\t\t\t\t\ticon.classList.remove( 'dislike-animation' )\r\n\t\t\t\t\t\t\t\t\tlikesBlock.classList.remove( 'you-liked' )\r\n\t\t\t\t\t\t\t\t\tlikesCount.innerHTML = response.data.count\r\n\t\t\t\t\t\t\t\t}, 750 )\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\t\tcase false:\r\n\t\t\t\t\t\t\tconsole.error( response.data.msg )\r\n\r\n\t\t\t\t\t\t\t// If User is not logged in - show Login form in popup.\r\n\t\t\t\t\t\t\tif( response.data.form ){\r\n\t\t\t\t\t\t\t\tconst authPopup = document.querySelector( '.popup-auth' )\r\n\r\n\t\t\t\t\t\t\t\tif( ! authPopup ) break\r\n\r\n\t\t\t\t\t\t\t\tconst popupInner = authPopup.querySelector( '.popup-inner' )\r\n\r\n\t\t\t\t\t\t\t\tsetTargetElement( '#popup-auth' )\r\n\t\t\t\t\t\t\t\tdisableBodyScroll( getTargetElement(), { reserveScrollBarGap: true } )\r\n\t\t\t\t\t\t\t\tpopupInner.innerHTML = response.data.form\r\n\t\t\t\t\t\t\t\tauthPopup.classList.remove( 'hidden' )\r\n\t\t\t\t\t\t\t\tfocusLabels()\r\n\t\t\t\t\t\t\t\tlogin()\r\n\t\t\t\t\t\t\t\topenAnotherFormInsidePopup()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetAjaxStatus( false )\r\n\t\t\t} )\r\n\t\t} )\r\n\t} )\r\n}"]}